<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>手計算</title>
<script>
window.MathJax = {
    tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        macros: {
            // v : ["\\boldsymbol{#1}", 1],
            v: ["{\\bf #1}", 1],
            jp : ["\\small{#1}", 1],
            pa : ["\\left( #1 \\right)", 1],
            Bra : ["\\left[ #1 \\right]", 1]
        }
    },
    options: {
        renderActions: {
            addMenu: [0, '', '']
        }
    }
};
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- >>=========>>=========>>=========>>=========>>=========>> -->

<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.18.0/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyBv9TmZDK1S1GkDiYkAuGNW5g67nQ51kxo",
    authDomain: "ban-sho.firebaseapp.com",
    databaseURL: "https://ban-sho.firebaseio.com",
    projectId: "ban-sho",
    storageBucket: "ban-sho.appspot.com",
    messagingSenderId: "794711869305",
    appId: "1:794711869305:web:a1f7fa66ae75f74fc051a8",
    measurementId: "G-233TZFKFTH"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
</script>

<!-- <<=========<<=========<<=========<<=========<<=========<< -->

<script src="lib/gl-matrix.js"></script>
<script src="lib/viz.js"></script>
<script src="lib/full.render.js"></script>

<script src="lib/gpgpu.ts/gpgpu.js" ></script>
<script src="lib/gpgpu.ts/shape.js" ></script>
<script src="lib/gpgpu.ts/shape-shader.js" ></script>

<script src="js/util.js?ver=1" ></script>
<script src="js/widget.js?ver=1" ></script>
<script src="js/event.js?ver=1" ></script>
<script src="js/speech.js?ver=1" ></script>
<script src="js/main.js?ver=1" ></script>
<script src="js/shape.js?ver=1" ></script>
<script src="js/matrix.js?ver=1" ></script>
<script src="js/gpu.js?ver=1" ></script>
<script src="js/firebase.js?ver=1" ></script>

<script src="js/graph.js?ver=1" ></script>
<script src="js/binder.js?ver=1" ></script>
<script src="js/lex.js?ver=1" ></script>

<style type="text/css">
html {
    width: 100%;
    height: 100%;
}

body {
    width: 100%;
    height: 100%;
    margin: 0;
}      

li {
    margin-top: 10px;
    margin-bottom: 10px;
}

.caption {
    height: 64px;
    clear: both;
    text-align: center;
    background-color: black;
    color: white;
    font-size: 24pt;
    font-family: "Helvetica Neue",
        Arial,
        "Hiragino Kaku Gothic ProN",
        "Hiragino Sans",
        Meiryo,
        sans-serif;
}

.range {
    width: 300px;
}

.number {
    width: 50px;
}

.emoji {
    font-family: Segoe UI Emoji;
}

mjx-container[display="true"] {
       margin: .5em 0 ! important
}
</style>

</head>

<body onload="bansho.initEdit()">
<div style="display: grid; grid-template-rows:50px 40px 1fr; grid-template-columns:150px 1fr 300px 300px; width: 100%; height: 100%;">
    <div style="grid-row: 1; grid-column: 1/span 4; background-color: cornsilk; ">
        <b id="db-off" style="color: red; ">DB off</b>
        <button id="add-shape" >図形を挿入</button>
        <button id="add-simulation">3D</button>
        <button id="add-viewpoint">視点</button>
        </select>
        <input type="radio" name="tool-type" value="select" checked />選択
        <input type="radio" name="tool-type" value="Point" />点
        <input type="radio" name="tool-type" value="LineSegment" />線分
        <input type="radio" name="tool-type" value="BSpline" />曲線
        <input type="radio" name="tool-type" value="Rect.1" />長方形
        <input type="radio" name="tool-type" value="Rect.2" />正方形
        <input type="radio" name="tool-type" value="Circle.1" />円1
        <input type="radio" name="tool-type" value="Circle.2" />円2
        <input type="radio" name="tool-type" value="Arc" />弧
        <input type="radio" name="tool-type" value="Triangle" />三角形
        <input type="radio" name="tool-type" value="Midpoint" />中点
        <input type="radio" name="tool-type" value="Perpendicular" />垂線
        <input type="radio" name="tool-type" value="ParallelLine" />平行線
        <input type="radio" name="tool-type" value="Intersection" />交点
        <input type="radio" name="tool-type" value="Angle" />角度
        <input type="radio" name="tool-type" value="Image" />画像
        <input type="radio" name="tool-type" value="DimensionLine" />寸法線
        <input type="radio" name="tool-type" value="FuncLine" />曲線
        <input type="radio" name="tool-type" value="Surface" />曲面
        <br/>
        <button id="txt-doc-id" >&nbsp;&nbsp;&nbsp;</button>
        <button id="show-map-dlg" >文書一覧</button>
        <input id="txt-title" type="text" style="width: 8em;" spellcheck="false" />

        <button id="new-doc" >新規</button>
        <button id="put-doc" >保存</button>

        <button id="play-pause" style="font-family: 'Segoe UI Emoji'" >▶️</button>
        <span id="play-time" style="font-family: monospace; ">&nbsp;&nbsp;&nbsp;&nbsp;</span>
        <button id="fast-reverse" style="font-family: Segoe UI Emoji;" >⏮</button>
        <button id="fast-forward" style="font-family: Segoe UI Emoji;" >⏭</button>

        <button id="add-text-block" style="font-family: Segoe UI Emoji;">➕✏️</button>
        <button id="add-speech" style="font-family: Segoe UI Emoji;">➕🔊</button>
        <button id="show-view-point" style="font-family: Segoe UI Emoji;" >✈️</button>

        <button id="move-up" style="font-family: Segoe UI Emoji;" >⬆️</button>
        <button id="move-down" style="font-family: Segoe UI Emoji;" >⬇️</button>
        <input id="doc-scale" type="number" min="1.0" max="2.0" value="1.0" step="0.1" />
        📺
        <input id="youtube" type="text" size=10 />
        
        <button id="delete-action" style="float: right;" >削除</button>
        <button id="del-doc"  style="float: right;" >文書削除</button>

        <!-- <label for="line-feed" style="display: none;">
            <input type="checkbox" id="line-feed" />改行
        </label> -->

        <!-- <input id="timeline" type="range" min="-1" max="-1" value="-1" step="1" style="width: 100%;" />     -->
    </div>

    <div style="grid-row: 2; grid-column: 1/span 2; ">
        <textarea id="txt-math" disabled style="width: 98%; height: 100%; overflow-x: visible; white-space: pre; font-size: large; font-weight: bold; " spellcheck="false" ></textarea>
    </div>

    <select id="sel-summary" style="grid-row: 2/span 3; grid-column: 3; font-family: 'Segoe UI Emoji';" size="10">
        <option selected >先頭</option>
    </select>

    <table id="tbl-property" style="grid-row: 2/span 3; grid-column: 4; background-color:lavender;"></table>

    <div id="board" style="grid-row: 3; grid-column: 1/span 2; overflow: scroll; border-style:inset; border-width: 3px;" >
        <div id="caption" class="caption"></div>
    </div>
</div>

<!-- --------------------------------------------------
GPGPUのパッケージの編集
-------------------------------------------------- -->
<dialog id="sim-edit-dlg" style="width: 90%; height: 90%;">
    パラメータ <input id="sim-params" type="text" style="width: 100em;" spellcheck="false" />
    <br/>
    <select id="sel-shape-pkg">
        <option value="point">点</option>
        <option value="surface">曲面</option>
        <option value="cube">立方体</option>
        <option value="Arrow1D">矢印</option>
        <option value="Arrow3D">矢印3D</option>
    </select>
    <button id="add-shape-pkg">追加</button>

    <div style="display: flex;">
        <div>
            <button id="add-package" style="width: 100%;" >Package</button><br/>
        </div>
        <div id="sim-edit-div"></div>
    </div>
    <button id="sim-edit-cancel">キャンセル</button>
    <button id="sim-edit-ok">OK</button>
</dialog>

<dialog id="pkg-edit-dlg">
    パラメータ<input id="pkg-params" type="text" style="width: 50em;" spellcheck="false" /><br/>
    入力数<input id="pkg-numInput" type="text"   style="width: 50em;" spellcheck="false" />
    <sapn id="pkg-numInput-value"></sapn><br/>
    フラグメントシェーダー
    <select id="pkg-fragment-shader">
        <option value="none">なし</option>
        <option value="point">点</option>
        <option value="plane">面</option>
    </select>
    <br/>

    表示
    <select id="pkg-display">
        <option value="" selected>なし</option>
        <option value="Circle">円</option>
        <option value="Disk">円板</option>
        <option value="CircularSector">扇型</option>
        <option value="Sphere">球</option>
        <option value="Tube">管</option>
        <option value="Line">直線</option>
        <option value="Arrow3D">矢印3D</option>
        <option value="Triangle">三角形</option>
        <option value="Parallelogram">平行四辺形</option>
        <option value="Cuboid">直方体</option>
    </select>

    順番
    <select id="pkg-order"></select>

    <table><tr>
        <td>
            <div id="pkg-vertex-shader" contenteditable spellcheck="false" style="font-family: monospace; font-weight: bold; background-color: white; padding: 10px; width: 600px; height: 600px; overflow: scroll; white-space: nowrap;">
                <div></div>
            </div>
        </td>
        <td>
            <div id="pkg-speech" contenteditable style="font-family: monospace; font-weight: bold; background-color: white; padding: 10px; width: 600px; height: 600px; overflow: scroll; white-space: nowrap;"></div>
        </td>
    </tr></table>

    <button id="pkg-edit-cancel">Cancel</button>
    <button id="pkg-edit-ok">OK</button>
    <button id="pkg-edit-del" style="float: right;" >削除</button>
</dialog>

<dialog id="tex-edit-dlg">
    <h4 id="tex-name"></h4>
    <select id="tex-texel-type">
        <option value="float">float</option>
        <option value="vec2">vec2</option>
        <option value="vec3">vec3</option>
        <option value="vec4">vec4</option>
    </select>
    サイズ <input id="tex-shape" type="text" width="20em" spellcheck="false" /><br/>
    <span id="tex-shape-value"></span>
    <button id="tex-edit-cancel">Cancel</button>
    <button id="tex-edit-ok">OK</button>
</dialog>

<dialog id="msg-box-dlg">
    <h4 id="msg-box-text"></h4>
    <button id="msg-box-cancel">Cancel</button>
    <button id="msg-box-ok">OK</button>
</dialog>

<dialog id="docs-dlg">
    <table id="docs-tbl" ></table>
</dialog>

<dialog id="view-point-dlg" style="position: absolute; left: 1300px; top: 200px;">
    <button class="emoji" style="float: right;" >❌</button><br/>
    <span style="clear: both;">回転</span><br/>
    X <input type="range" class="range" min="-180" max="180" /> <input type="number" class="number" min="-180" max="180" /> <button class="emoji">0️⃣</button> <br/>
    Y <input type="range" class="range" min="-180" max="180" /> <input type="number" class="number" min="-180" max="180" /> <button class="emoji">0️⃣</button> <br/>
    Z <input type="range" class="range" min="-180" max="180" /> <input type="number" class="number" min="-180" max="180" /> <button class="emoji">0️⃣</button> <br/>

    平行移動<br/>
    X <input type="range" class="range" min="-20" max="20" step="0.1" /> <input type="number" class="number" min="-20" max="20" step="0.1" /> <button class="emoji">0️⃣</button> <br/>
    Y <input type="range" class="range" min="-20" max="20" step="0.1" /> <input type="number" class="number" min="-20" max="20" step="0.1" /> <button class="emoji">0️⃣</button> <br/>
    Z <input type="range" class="range" min="-50" max="0"  step="0.1" /> <input type="number" class="number" min="-50" max="0"  step="0.1" /> <button class="emoji">0️⃣</button> <br/>

    視野<br/>
    X <input type="range" class="range" min="10" max="90" step="1" /> <input type="number" class="number" min="10" max="90" step="1" /> <button class="emoji">0️⃣</button> <br/>
</dialog>
    
</body>
</html>